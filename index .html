<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GollGlobal • Impact Dashboard (Prototype)</title>

  <!-- Leaflet (Map) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- Chart.js + DataLabels -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>

  <!-- Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f7fafc; --card:#fff; --ink:#0f172a; --muted:#64748b;
      --blue:#03a4d9; --rose:#ff7998; --ring:#e2e8f0;
      --pill:#e6f7fd;
    }
    *{ box-sizing: border-box; }
    body{ margin:0; font-family:Inter,system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--ink); background:var(--bg); }
    header{ position:sticky; top:0; z-index:10; background:linear-gradient(180deg,#ffffff 0%,rgba(255,255,255,.9) 100%); backdrop-filter:saturate(150%) blur(6px); border-bottom:1px solid var(--ring); }
    .wrap{ max-width:1100px; margin:0 auto; padding:16px 20px; }
    .brand{ display:flex; gap:16px; align-items:center; }
    .brand .logo{ width:44px; height:44px; border-radius:8px; background:var(--pill); display:flex; align-items:center; justify-content:center; font-weight:700; color:var(--blue); }
    .brand h1{ margin:0; font-size:28px; line-height:1.1; }
    .brand small{ display:block; color:var(--muted); }
    nav{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
    nav button{ padding:8px 14px; border:1px solid var(--ring); border-radius:999px; background:#fff; color:var(--ink); }
    nav button.active{ background:var(--blue); color:#fff; border-color:transparent; }
    main{ max-width:1100px; margin:18px auto; padding:0 20px 40px; }
    .section{ margin:22px 0; }
    .card{ background:var(--card); border:1px solid var(--ring); border-radius:14px; padding:16px; box-shadow:0 2px 6px rgba(15,23,42,.04); }
    .grid{ display:grid; gap:16px; }
    .cols-2{ grid-template-columns:repeat(2,minmax(0,1fr)); }
    .cols-3{ grid-template-columns:repeat(3,minmax(0,1fr)); }
    @media (max-width:900px){ .cols-2,.cols-3{ grid-template-columns:1fr; } }
    h3{ margin:0 0 10px 0; }
    .muted{ color:var(--muted); }
    canvas{ width:100%; height:320px; }
    #map{ width:100%; height:360px; border-radius:12px; }
    footer{ border-top:1px solid var(--ring); color:var(--muted); padding:16px 20px 40px; margin-top:28px; }
    .pill{ background:var(--pill); color:var(--blue); padding:2px 10px; border-radius:999px; font-weight:600; }
    .btn{ display:inline-block; background:var(--blue); color:#fff; padding:10px 14px; border-radius:10px; text-decoration:none; }
    .btn.ghost{ background:#fff; color:var(--ink); border:1px solid var(--ring); }
    ul{ margin:6px 0 0 18px; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <div class="logo">GG</div>
        <div>
          <h1>Impact Dashboard <span class="pill">Prototype</span></h1>
          <small>Sauberes Trinkwasser für alle – überall, jederzeit.</small>
        </div>
      </div>
      <nav id="tabs">
        <button data-target="overview" class="active">Übersicht</button>
        <button data-target="impact">Impact</button>
        <button data-target="map-sec">Karte</button>
        <button data-target="media">Medien</button>
        <button data-target="shop">Pre‑Order</button>
        <button data-target="about">Projekt</button>
      </nav>
    </div>
  </header>

  <main>
    <!-- Übersicht -->
    <section id="overview" class="section">
      <div class="grid cols-3" style="margin-bottom:14px">
        <div class="card">
          <span class="pill">One-Pager Preview</span>
          <h2>Atmospheric Water Generator (AWG)</h2>
          <p class="muted">Tragbares Gerät, 10–15 L/Tag, Solar/Akku, 5‑Stufen‑Filter. Buy‑One‑Give‑One + Recycling‑Programm.</p>
          <div class="grid cols-3">
            <div class="stat card">
              <div class="muted">Verkaufte Geräte</div>
              <div style="font-size:28px;color:var(--blue);font-weight:700" id="sold_total">–</div>
            </div>
            <div class="stat card">
              <div class="muted">Gespendete Geräte</div>
              <div style="font-size:28px;color:var(--blue);font-weight:700" id="don_total">–</div>
            </div>
            <div class="stat card">
              <div class="muted">Wasser erzeugt (L)</div>
              <div style="font-size:28px;color:var(--blue);font-weight:700" id="liters_total">–</div>
            </div>
          </div>
        </div>
        <div class="card">
          <h3>Umsatz / Gewinn</h3>
          <canvas id="revChart"></canvas>
          <div class="muted" style="margin-top:6px">
            <span style="color:var(--blue)">▮</span> Umsatz (Mio €) &nbsp;&nbsp;
            <span style="color:var(--rose)">▮</span> Gewinn (Mio €)
          </div>
        </div>
        <div class="card">
          <h3>Geräte p.a.</h3>
          <canvas id="unitsChart"></canvas>
          <div class="muted" style="margin-top:6px">
            <span style="color:var(--blue)">▮</span> Verkaufte Geräte &nbsp;&nbsp;
            <span style="color:var(--rose)">▮</span> Gespendete Geräte
          </div>
        </div>
      </div>

      <div class="grid cols-3">
        <div class="card">
          <h3>Spenden p.a.</h3>
          <canvas id="donChart"></canvas>
          <div class="muted" style="margin-top:6px">
            <span style="color:var(--blue)">▮</span> Spenden (Mio €) &nbsp;&nbsp;
            <span style="color:var(--rose)">▮</span> Fee an GollGlobal (Mio €)
          </div>
        </div>
        <div class="card">
          <h3>Hinweis: Demo & Annahmen</h3>
          <ul class="muted">
            <li>Zahlen sind Modellannahmen; ändern sich mit echten Daten.</li>
            <li>Ab 2032: Spenden = Verkäufe (Parität).</li>
            <li>Filter‑Abo 5 €/Monat; Plattform‑Fee 5 % bis 2037, ab 2038 20 % (eigene Produktion).</li>
          </ul>
        </div>
        <div class="card">
          <h3>Kurz erklärt</h3>
          <ul>
            <li><b>Produkt:</b> Kompakt‑AWG, 10–15 L/Tag, Solar/Akku.</li>
            <li><b>Modell:</b> 1.499 € Verkauf; Buy‑One‑Give‑One + Impact‑Network.</li>
            <li><b>Marketing:</b> NGOs + Influencer + No‑Cost Booster.</li>
            <li><b>Förderungen:</b> 170–185 T€ pro 1.000 Geräte (Beispielannahmen).</li>
          </ul>
          <a class="btn" href="#impact">Zum Impact</a>
          <a class="btn ghost" href="#map-sec" style="margin-left:8px">Einsatzkarte</a>
        </div>
      </div>
    </section>

    <!-- Impact -->
    <section id="impact" class="section" style="display:none">
      <div class="card">
        <h3>Impact‑Network</h3>
        <p>Empfehlungen ohne Geldprämien – nur Transparenz &amp; Wirkung. Jede Empfehlung erzeugt einen eindeutigen Impact‑Link.</p>
        <div class="grid cols-2">
          <div class="card">
            <div class="muted">Aktive Botschafter:innen</div>
            <div style="font-size:26px;color:var(--blue);font-weight:700" id="ambassadors">12.500</div>
          </div>
          <div class="card">
            <div class="muted">Empfehlungen (12M)</div>
            <div style="font-size:26px;color:var(--blue);font-weight:700" id="referrals">185.000</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Map -->
    <section id="map-sec" class="section" style="display:none">
      <div class="card">
        <h3>Einsatzorte</h3>
        <div id="map"></div>
      </div>
    </section>

    <!-- Media -->
    <section id="media" class="section" style="display:none">
      <div class="card">
        <h3>Fotos & Videos</h3>
        <div class="grid cols-3">
          <img alt="Demo" src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?q=80&w=800&auto=format&fit=crop" style="width:100%;border-radius:10px" />
          <img alt="Demo" src="https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?q=80&w=800&auto=format&fit=crop" style="width:100%;border-radius:10px" />
          <iframe style="width:100%;height:220px;border:0;border-radius:10px" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video"></iframe>
        </div>
      </div>
    </section>

    <!-- Shop -->
    <section id="shop" class="section" style="display:none">
      <div class="card">
        <h3>Pre‑Order (Demo)</h3>
        <p><b>GollGlobal AWG</b> — 1.499 €</p>
        <a class="btn" href="mailto:info@gollglobal.example">Interesse anmelden</a>
        <a class="btn ghost" href="#about" style="margin-left:8px">Projektinfos</a>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="section" style="display:none">
      <div class="card">
        <h3>Projekt</h3>
        <p>Mission: Sauberes Trinkwasser für alle. Skalierung über Verkauf + Spendenparität + Impact‑Network.</p>
      </div>
    </section>
  </main>

  <footer class="wrap">
    © GollGlobal — Prototype • Branding‑Version ohne externes Bildlogo (lädt überall stabil)
  </footer>

  <script>
    // Tabs
    const tabs = document.querySelectorAll('#tabs button');
    const sections = ['overview','impact','map-sec','media','shop','about'].map(id=>document.getElementById(id));
    tabs.forEach(btn=>btn.addEventListener('click',()=>{
      tabs.forEach(b=>b.classList.remove('active')); btn.classList.add('active');
      sections.forEach(s=>s.style.display = (s.id===btn.dataset.target)?'block':'none');
      if(btn.dataset.target==='map-sec' && !window._mapReady){ setTimeout(initMap,50); }
    }));

    // Config + Data (wie vorher – Parität ab 2032)
    const cfg = {
      START_PARITY_YEAR: 2032,
      PEOPLE_PER_DEVICE: 5,
      LITERS_PER_DEVICE_PER_YEAR: 3650, // 10L/Tag grob
      years: [2028,2029,2030,2031,2032,2033,2034,2035]
    };

    // Beispiel-Reihen (nah an deiner Vorschau)
    const sales = [15000,36000,45000,61000,76000,88000,98000,110000];
    const donated = [ 7500,18000,22500,30500,38000,44000,49000,55000]; // steigt Richtung Parität
    const revenueM = [15,45,60,80,95,112,130,150];
    const profitM  = [5, 10,14,18,22,27,33,40];
    const donationsM = [2,5,7,10,12,14,16,18];
    const feeM = [0.1,0.25,0.35,0.5,0.6,0.7,0.8,0.9];

    // Totals
    const sum = a => a.reduce((x,y)=>x+y,0);
    const nf = new Intl.NumberFormat('de-DE');
    const soldTotal = sum(sales);
    const donTotal = sum(donated);
    const litersTotal = (soldTotal+donTotal)*cfg.LITERS_PER_DEVICE_PER_YEAR;
    document.getElementById('sold_total').textContent = nf.format(soldTotal);
    document.getElementById('don_total').textContent  = nf.format(donTotal);
    document.getElementById('liters_total').textContent = nf.format(litersTotal);

    // Chart helpers
    Chart.register(ChartDataLabels);
    const common = {
      scales:{
        x:{ ticks:{ color:'#334155' } },
        y:{ ticks:{ color:'#334155', callback:v=>nf.format(v) }, grid:{ color:'#eef2f7' } }
      },
      plugins:{
        legend:{ display:false },
        datalabels:{ color:'#334155', anchor:'end', align:'end', offset:4, formatter:v=>nf.format(v) }
      }
    };

    // Umsatz / Gewinn
    new Chart(document.getElementById('revChart'),{
      type:'line',
      data:{
        labels:cfg.years.map(String),
        datasets:[
          {label:'Umsatz', data:revenueM, borderColor:'#03a4d9', backgroundColor:'rgba(3,164,217,.2)', tension:.3},
          {label:'Gewinn', data:profitM,  borderColor:'#ff7998', backgroundColor:'rgba(255,121,152,.2)', tension:.3}
        ]
      },
      options: JSON.parse(JSON.stringify(common))
    });

    // Geräte
    new Chart(document.getElementById('unitsChart'),{
      type:'bar',
      data:{
        labels:cfg.years.map(String),
        datasets:[
          {label:'Verkaufte Geräte', data:sales, backgroundColor:'#03a4d9'},
          {label:'Gespendete Geräte', data:donated, backgroundColor:'#ff7998'}
        ]
      },
      options: JSON.parse(JSON.stringify(common))
    });

    // Spenden
    new Chart(document.getElementById('donChart'),{
      type:'bar',
      data:{
        labels:cfg.years.map(String),
        datasets:[
          {label:'Spenden (Mio €)', data:donationsM, backgroundColor:'#03a4d9'},
          {label:'Fee an GollGlobal (Mio €)', data:feeM, backgroundColor:'#ff7998'}
        ]
      },
      options: JSON.parse(JSON.stringify(common))
    });

    // Leaflet Map
    function initMap(){
      if(window._mapReady) return;
      const map = L.map('map',{ scrollWheelZoom:false }).setView([5,20], 2.3);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'© OpenStreetMap' }).addTo(map);

      const sites = [
        { name:'Kenya – Turkana', coords:[3.1,35.6], units:2500 },
        { name:'India – Rajasthan', coords:[26.9,75.8], units:4200 },
        { name:'Peru – Piura', coords:[-5.2,-80.6], units:1800 },
        { name:'Morocco – Tata', coords:[29.7,-7.9], units:1200 },
      ];
      sites.forEach(s=>L.marker(s.coords).addTo(map).bindPopup(`<b>${s.name}</b><br/>Geräte: ${nf.format(s.units)}`));
      window._mapReady = true;
    }
  </script>
</body>
</html>
